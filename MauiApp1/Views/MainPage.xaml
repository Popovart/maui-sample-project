<?xml version="1.0" encoding="utf-8"?>
<ContentPage
	xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
	xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
	x:Class="MauiApp1.Views.MainPage"
	xmlns:models="clr-namespace:MauiApp1.Models"
	xmlns:viewModels="clr-namespace:MauiApp1.ViewModels"
	xmlns:strings="clr-namespace:MauiApp1.Resources.Strings"
	x:DataType="viewModels:MainViewModel"
>
	<VerticalStackLayout>
		<!-- <Button Text="Open TaskPopup" Command="{Binding DisplayPopupCommand}"/>  -->
		<Grid
			RowDefinitions="100, Auto, *"
			ColumnDefinitions=".75*, .25*"
			Padding="10"
			RowSpacing="10"
			ColumnSpacing="10"
		>
			<Image
				Grid.ColumnSpan="2"
				Source="dotnet_bot.png"
				BackgroundColor="Aqua"
			/>
			<Entry
				Placeholder="Enter TaskModel"
				Text="{Binding TaskName}"
				Grid.Row="1"
			/>
			<Button
				Command="{Binding AddCommand}"
				Text="{x:Static strings:Resources1.AddButtonText}"
				Grid.Row="1"
				Grid.Column="1"
			/>
			<CollectionView
				Grid.Row="2"
				Grid.ColumnSpan="2"
				ItemsSource="{Binding Items}"
				SelectionMode="None"
			>
				<CollectionView.ItemTemplate>
					<DataTemplate x:DataType="{x:Type models:TaskModel}">
						<SwipeView>
							<SwipeView.RightItems>
								<SwipeItems>
									<SwipeItem
										Command="{
                                            Binding Source={RelativeSource AncestorType={x:Type viewModels:MainViewModel}},
                                            Path=DeleteCommand
                                        }"
										CommandParameter="{Binding .}"
										Text="Delete"
										BackgroundColor="Crimson"
									></SwipeItem>
								</SwipeItems>
							</SwipeView.RightItems>
							<Grid Padding="0,5">
								<Border
									Padding="10, 5"
									BackgroundColor="Chocolate"
								>
									<Border.GestureRecognizers>
										<TapGestureRecognizer
											Command="{
                                                Binding Source={RelativeSource AncestorType={x:Type viewModels:MainViewModel}},
                                                Path=DisplayComplexPopupCommand
                                            }"
											CommandParameter="{Binding .}"
										/>
									</Border.GestureRecognizers>
									<FlexLayout
										Direction="Row"
										JustifyContent="SpaceBetween"
										AlignItems="Center"
										Padding="12"
									>
										<Label
											Text="{Binding .Name}"
											VerticalTextAlignment="Center"
										/>
										<Image
											Source="beer.png"
											WidthRequest="24"
											HeightRequest="24"
											Aspect="AspectFit"
										/>
									</FlexLayout>
								</Border>
							</Grid>
						</SwipeView>
					</DataTemplate>
				</CollectionView.ItemTemplate>
			</CollectionView>
		</Grid>
	</VerticalStackLayout>
</ContentPage>
